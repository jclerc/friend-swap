<h1>Pages#index</h1>
<p>Find me in app/views/pages/index.html.erb</p>

<% unless user_signed_in? %>
    <%= link_to 'Inscription', new_user_registration_path %>
    <%= link_to 'Identification', new_user_session_path %>
<% else %>
    <%= link_to 'Compte', edit_user_registration_path %>
    <%= link_to 'DÃ©connexion', destroy_user_session_path, method: :delete %>
<% end %>

<hr>

<h2>Search</h2>

<%= form_tag(controller: "pages", action: "search") do %>
  <%=
    collection_check_boxes(nil, :tags, Tag.all, :id, :label_male) do |b|
      b.label { b.check_box + ' ' + b.text }
    end
  %>
  <br>
  <%=
    collection_radio_buttons(nil, :city, City.all, :id, :name, {}, { required: true }) do |b|
      b.label { b.radio_button + ' ' + b.text }
    end
  %>
  <%= submit_tag("Search") %>
<% end %>

<hr>

<h2>Best tags by city</h2>

<% @tags_by_city.limit(4).each do |tag| %>
  <%= link_to "#{tag.label_male} (#{tag.count}) - #{tag.city_name}", search_get_path(
    city_name: @city.name.parameterize, city: @city.id,
    tag_name: tag.label_male.parameterize, tag: tag.id
  ) %>
<% end %>

<hr>

<h2>Most traded</h2>

<% @most_traded.limit(20).each do |friend| %>
  <p>
    <%= friend.first_name %>,
    <%= friend.exchanges_count %>,
    <td><%= link_to 'Show', friend %></td>
  </p>
<% end %>
